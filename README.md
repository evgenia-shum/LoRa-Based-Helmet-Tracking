<img width="2368" height="1473" alt="image" src="https://github.com/user-attachments/assets/b8a1caa2-31fb-4c9d-9344-8389b95b846d" /><img width="8001" height="4501" alt="планшет_web" src="https://github.com/user-attachments/assets/e910362d-b751-4a66-9fc8-ea3855d8b76c" />

# Пользовательское приложение

## Интерфейс приложения

Интерфейс приложения сформирован с помощью библиотеки *Tkinter* для *Python.*

Интеграция карты местности в приложение осуществляется по средство пакета *mapwidget*, 

<img width="1953" height="1542" alt="image" src="https://github.com/user-attachments/assets/749035f4-354c-4629-865b-d9b8407bd6ff" /> 


<img width="954" height="634" alt="image" src="https://github.com/user-attachments/assets/7af719b0-5c77-466e-91cc-c5f6a10b632e" />


## Реализация геозонирования

 Одной из функций модуля – сообщать работнику (и диспетчеру), когда он заходит в «опасную зону». «Опасной зоной» может быть любой участок, который определит диспетчер в начале работ с помощью приложения, к примеру, территория вблизи работающего оборудования. 

Физически «зона» представляет собой полигон, как правило, четырехугольник. Чтобы определить, находится ли переданная модулем координата GPS внутри этого полигона, можно воспользоваться методом лучей. Луч, проведенный из этой точки в любом направлении, пересечет многоугольник нечетное количество раз, если точка находится внутри многоугольника, и четное количество раз, если не находится. Таким образом, необходимо сначала построить линейное уравнение из исследуемой точки, которое будет использоваться в качестве луча. 

Описанный выше метод используется в библиотеке *Picket*, которая использовалась для решения задач геозонирования.

Для демонстрации функции геозонирования в программном коде был задан массив координат точек, образующие четырехугольник на карте – «зону», обозначенную красным цветом.


<img width="2861" height="1607" alt="image" src="https://github.com/user-attachments/assets/326e807f-b3f8-404d-bcea-2d5be9136df2" /> 


Программа проверяет входную координату: если она находится внутри полигона, ставит маркер с номером пользователя, если нет – пишет «Нельзя!»

## Оповещение о падении и отправке тревожного сигнала

В случае ЧС, пользователь может нажать на тревожную кнопку. При этом, на Базовую станцию отправится сигнал “SOS” и в пользовательском приложение будет мигать соответствующий индикатор. 

То же самое случится, если встроенный в модуль гироскоп зафиксирует падение.

<img width="2368" height="1473" alt="image" src="https://github.com/user-attachments/assets/242a5484-0c57-45d8-a7c1-44aa4f9d1886" />


# Портативный модуль на каску
В модуле используются GPS-приемник для получения координат на открытой местности и гироскоп с акселерометром (LSM6DS3) для обнаружения падения, ударов. Процессором является микроконтроллер STM32F401CE.

Разработка ПО велась в среде *PLatformio* с применением фреймворка *Arduino*.

Модуль GPS работает по интерфейсу UART, Для работы с ним применили встроенную библиотеку Arduino *SoftwareSerial.h*.
Для парсинга данных GPS по протоколу NMEA использовалась библиотека TinyGPS++.h. Она позволяет получать необходимую информацию со спутников (координаты, дату и время), не вдаваясь в расшифровку протокола NMEA.
Для получения данных с гироскопа и акселерометра была настроена работа с интерфейсов I2C для модуля IMU: подключены библиотеки Wire.h – для работы с интерфейсом, MadgwickAHRS.h – для реализации фильтра данных с гироскопа и акселерометра, SparkFunLSM6DS3.h – для работы с датчиком LSM6DS3.
